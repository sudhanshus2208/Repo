{
	"name": "dataflow1",
	"properties": {
		"type": "MappingDataFlow",
		"typeProperties": {
			"sources": [
				{
					"dataset": {
						"referenceName": "outputJSON",
						"type": "DatasetReference"
					},
					"name": "source1"
				},
				{
					"dataset": {
						"referenceName": "MasterComponentProcessSubProcessSetup",
						"type": "DatasetReference"
					},
					"name": "source2"
				}
			],
			"sinks": [
				{
					"dataset": {
						"referenceName": "outputJSON_Final",
						"type": "DatasetReference"
					},
					"name": "sink1"
				}
			],
			"transformations": [
				{
					"name": "join1"
				}
			],
			"scriptLines": [
				"source(output(",
				"          time as string,",
				"          resourceId as string,",
				"          ResourceGUID as string,",
				"          TypeAA as string,",
				"          AppRoleInstance as string,",
				"          AppRoleName as string,",
				"          ClientCity as string,",
				"          ClientCountryOrRegion as string,",
				"          ClientIP as string,",
				"          ClientStateOrProvince as string,",
				"          ClientType as string,",
				"          IKey as string,",
				"          {_BilledSize} as float,",
				"          SDKVersion as string,",
				"          SessionId as string,",
				"          UserId as string,",
				"          environmentId as string,",
				"          MethodName as string,",
				"          LegalEntity as string,",
				"          CallStack as string,",
				"          BatchJobId as string,",
				"          BatchJobCaption as string,",
				"          ClassName as string,",
				"          aadTenantId as string,",
				"          ExecutionMode as string,",
				"          activityId as string,",
				"          outerId as string,",
				"          message as string,",
				"          type as string,",
				"          id as string,",
				"          ProblemId as string,",
				"          ExceptionType as string,",
				"          Assembly as string,",
				"          Method as string,",
				"          OuterType as string,",
				"          OuterMessage as string,",
				"          ItemCount as float,",
				"          FileName as string",
				"     ),",
				"     allowSchemaDrift: true,",
				"     validateSchema: false,",
				"     isolationLevel: 'READ_UNCOMMITTED',",
				"     format: 'table') ~> source1",
				"source(output(",
				"          Component as string,",
				"          BatchJobCaption as string,",
				"          Process as string,",
				"          SubProcess as string",
				"     ),",
				"     allowSchemaDrift: true,",
				"     validateSchema: false,",
				"     inferDriftedColumnTypes: true,",
				"     isolationLevel: 'READ_UNCOMMITTED',",
				"     format: 'table') ~> source2",
				"source1, source2 join(source1@BatchJobCaption == source2@BatchJobCaption,",
				"     joinType:'left',",
				"     matchType:'exact',",
				"     ignoreSpaces: false,",
				"     broadcast: 'auto')~> join1",
				"join1 sink(allowSchemaDrift: true,",
				"     validateSchema: false,",
				"     input(",
				"          time as string,",
				"          resourceId as string,",
				"          ResourceGUID as string,",
				"          TypeAA as string,",
				"          AppRoleInstance as string,",
				"          AppRoleName as string,",
				"          ClientCity as string,",
				"          ClientCountryOrRegion as string,",
				"          ClientIP as string,",
				"          ClientStateOrProvince as string,",
				"          ClientType as string,",
				"          IKey as string,",
				"          {_BilledSize} as float,",
				"          SDKVersion as string,",
				"          SessionId as string,",
				"          UserId as string,",
				"          environmentId as string,",
				"          MethodName as string,",
				"          LegalEntity as string,",
				"          CallStack as string,",
				"          BatchJobId as string,",
				"          BatchJobCaption as string,",
				"          ClassName as string,",
				"          aadTenantId as string,",
				"          ExecutionMode as string,",
				"          activityId as string,",
				"          outerId as string,",
				"          message as string,",
				"          type as string,",
				"          id as string,",
				"          ProblemId as string,",
				"          ExceptionType as string,",
				"          Assembly as string,",
				"          Method as string,",
				"          OuterType as string,",
				"          OuterMessage as string,",
				"          ItemCount as float,",
				"          FileName as string,",
				"          Process as string,",
				"          SubProcess as string,",
				"          ComponentName as string",
				"     ),",
				"     deletable:false,",
				"     insertable:true,",
				"     updateable:false,",
				"     upsertable:false,",
				"     format: 'table',",
				"     skipDuplicateMapInputs: true,",
				"     skipDuplicateMapOutputs: true,",
				"     errorHandlingOption: 'stopOnFirstError',",
				"     mapColumn(",
				"          time,",
				"          resourceId,",
				"          ResourceGUID,",
				"          TypeAA,",
				"          AppRoleInstance,",
				"          AppRoleName,",
				"          ClientCity,",
				"          ClientCountryOrRegion,",
				"          ClientIP,",
				"          ClientStateOrProvince,",
				"          ClientType,",
				"          IKey,",
				"          {_BilledSize},",
				"          SDKVersion,",
				"          SessionId,",
				"          UserId,",
				"          environmentId,",
				"          MethodName,",
				"          LegalEntity,",
				"          CallStack,",
				"          BatchJobId,",
				"          ClassName,",
				"          aadTenantId,",
				"          ExecutionMode,",
				"          activityId,",
				"          outerId,",
				"          message,",
				"          type,",
				"          id,",
				"          ProblemId,",
				"          ExceptionType,",
				"          Assembly,",
				"          Method,",
				"          OuterType,",
				"          OuterMessage,",
				"          ItemCount,",
				"          FileName,",
				"          Process,",
				"          SubProcess,",
				"          ComponentName = Component,",
				"          BatchJobCaption = source1@BatchJobCaption",
				"     )) ~> sink1"
			]
		}
	}
}